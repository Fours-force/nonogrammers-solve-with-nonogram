<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{./defaultLayout.html}">
<body>
<th:block layout:fragment="content"> <!-- session 타임리프 변수에 저장 -->
    <div class="flex justify-center w-screen h-full max-w-screen-xl mx-auto sm:px-6 lg:px-8 gap-x-2 bg-back">
        <!-- 우측 contents -->
        <div class="w-8/12 mt-2 max:w-full font-brr min-w-max">
            <h1 class="pb-5 pl-5 text-3xl border-b-2 mb-7 font-brr text-nav-navy">NONOBOX</h1>
            <div class="flex justify-between mb-10">
                <div><img src="/images/Bronze.png" alt="" class="transition duration-200 hover:scale-105 imgs" /></div>
                <div><img src="/images/Silver.png" alt="" class="transition duration-200 hover:scale-105 imgs" /></div>
                <div><img src="/images/Gold.png" alt="" class="transition duration-200 hover:scale-105 imgs" /></div>
                <div><img src="/images/Platinum.png" alt="" class="transition duration-200 hover:scale-105 imgs" /></div>
            </div>
            <article id="NonoListContainer"
                class="grid grid-cols-1 gap-y-3 gap-x-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-1 xl:gap-y-1">
                <th:block th:each="nono : ${nonoList}">
                    <div class="w-8/12 mx-auto h-full">
                        <a th:href="@{|/nonodots/${session.value.get('userId')}/${nono.nonoId}/${session.value.get('baekjoonUserId')}|}"
                           class="block h-full max-w-md p-6 mx-auto bg-white border-4 rounded-lg shadow w-12/12 border-nono-mypg-item-border dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700">
                            <div class="flex items-center h-full">
                                <!--                                <span th:text=""></span>-->
                                <img th:src="@{${nono.getNonoImgUrl()}}"
                                     alt="" class="object-contain w-full h-full transition duration-200 hover:scale-105">
                            </div>
                        </a>
                    </div>
                </th:block>

            </article>
        </div>
    </div>

    <script th:inline="javascript">
        let cnt = 1;
        console.log("hello");
        // let nono = [[${session.value.get('userId')}]];
        // console.log(nono);
        // let nonoList = [[${nonoList}]];
        // console.log(nonoList.get(0).get('nonoId'));
        let imgs = document.getElementsByClassName("imgs");
        let NonoListContainer = document.getElementById("NonoListConatiner");
        console.log("imgs 의 돔객체" + imgs);
        for(let i =0; i<imgs.length; i++){
            console.log(imgs[i].classList);
            imgs[i].addEventListener("click",function (i) {
                console.log("clicked!");
                const xhr = new XMLHttpRequest();
                xhr.onload = () => {
                    if(xhr.status == 200){
                        console.log(xhr.response);
                        NonoListContainer.replaceWith(JSON.parse(xhr.response));
                    }
                }
                xhr.open('Get','/nonobox/'+cnt);
                xhr.send();
            })
            cnt++;
        }
        // function getNonoListByLevel(level){
        //     window.alert("시작!")
        //     let NonoListContainer = document.getElementById("NonoListContainer");
        //     const xhr = new XMLHttpRequest();
        //     xhr.onload = () => {
        //         if(xhr.status == 200){
        //             NonoListContainer.replaceWith(xhr.response);
        //         }
        //     }
        //     xhr.open('Get','/nonobox/'+level);
        //     xhr.send();
        // }
    </script>
</th:block>

</body>

</html>