<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>header</title>
    <link rel="stylesheet" href="./css/dist/output.css">
  </head>
  <body>
    <div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
      <!-- 헤더이미지 -->
      <div class="sm:mx-auto sm:w-full sm:max-w-sm">
        <img class="mx-auto h-auto w-auto" src="/images/user.png" alt="userLogo" />
      </div>

      <!-- 사용자 정보 입력 -->
      <div class="mt-6 rounded-lg bg-cmt-user-div-bg px-3.5 py-3.5 sm:mx-auto sm:w-full sm:max-w-sm">
        <form class="space-y-6" id="submitEmail">
          <!-- 이메일 입력 -->
          <div>
            <label class="block font-brr text-sm leading-6 text-gray-900">가입한 이메일 주소를 입력해주세요</label>
            <div id="email-box" class="mt-2 flex flex-wrap rounded-sm border border-main-skyblue bg-white p-1">
              <input
                name="email"
                type="email"
                autocomplete="email"
                placeholder="&nbsp;이메일을 입력해주세요"
                required
                class="outline:none basis-4/5 rounded-sm py-2 text-gray-900 placeholder:text-gray-400 focus:outline-none sm:text-sm sm:leading-6"
              />
              <!-- 이메일 존재 여부 확인 버튼 -->
              <button type="button" onclick="checkDuplicate()" class="border-black-800 basis-1/5 rounded-md border border-main-skyblue bg-main-skyblue font-brr text-lg text-white hover:bg-user-chk-btn">
                확인
              </button>
              <span id="email-error" class="text-xs text-red-500"></span>
            </div>
          </div>
          <!-- 제출 버튼 -->
          <div>
            <button
              id="reset-password-btn"
              type="submit"
              disabled
              class="text-md flex w-full justify-center rounded-lg bg-user-home-btn px-3 py-2 font-brr leading-6 text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
            >
              이메일로 비밀번호 재설정 링크 받기
            </button>
          </div>
        </form>
      </div>

      <div id="successedSend" class="mt-6 flex hidden flex-col place-items-center rounded-lg bg-whitegray sm:mx-auto sm:w-full sm:max-w-sm">
        <img class="my-2 h-16 w-16" src="/images/user-msg.png" alt="Email" />
        <span class="font-brr">이메일 확인</span>
        <span class="my-2 font-brr text-sm">이메일로 전송된 메일을 확인해 주세요</span>
        <div class="my-4 text-xs text-gray-400">
          <span>ⓘ 이메일을 받지 못하셨나요?</span>
          <a href="#" class="text-decoration-line: underline">이메일 재전송하기</a>
        </div>
      </div>

      <div id="failedSend" class="mt-6 flex hidden flex-col place-items-center rounded-lg bg-back sm:mx-auto sm:w-full sm:max-w-sm">
        <img class="my-2 h-16 w-16" src="/images/user-err-msg.png" alt="Email" />
        <span class="font-brr text-red-500">이메일 전송 실패</span>
        <span class="my-2 mb-4 font-brr text-sm">이메일 주소를 확인해 주세요</span>
      </div>
    </div>

    <script>
      // 이메일 존재 여부 확인 함수
      function checkDuplicate() {
        // 해당 이메일이 존재하지 않으면 에러 메시지 출력
        // document.getElementById('email-error').innerText = '등록된 이메일 주소가 아닙니다';
        // document.getElementById("email-box").classList.replace("border-gray-300", "border-red-300");

        // 해당 이메일이 존재하면 제출 버튼 활성화
        document.getElementById("email-error").innerText = "";
        document.getElementById("email-box").classList.replace("border-red-300", "border-gray-300");
        document.getElementById("reset-password-btn").disabled = false;
        document.getElementById("reset-password-btn").classList.replace("bg-user-home-btn", "bg-main-blue");
        document.getElementById("reset-password-btn").classList.add("hover:bg-user-home-btn");
      }

      document.getElementById("submitEmail").addEventListener("submit", function (event) {
        // 기본 폼 제출 동작 방지
        event.preventDefault();

        var shouldShowDiv = true;
        if (shouldShowDiv) {
          document.getElementById("successedSend").classList.remove("hidden");
        } else {
          document.getElementById("failedSend").classList.remove("hidden");
        }
        //         }
        // fetch('#', {
        //     method: 'POST',
        //     body: new FormData(this), // 폼 데이터를 전송하는 것으로 가정
        // })
        //     .then(response => response.json())
        //     .then(data => {
        //         // 표시 여부
        //         var shouldShowDiv = true;

        //         // 조건에 따라 div를 표시, 숨김
        //         if (shouldShowDiv) {
        //             document.getElementById('successedSend').classList.remove('hidden');
        //         } else {
        //             document.getElementById('failedSend').classList.remove('hidden');
        //         }
        //     })
        //     .catch(error => console.error('에러:', error));
      });
    </script>
  </body>
</html>
